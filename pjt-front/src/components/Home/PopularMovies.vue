<template>

<div class="col-md-12">
	<div class="title-hd">
		<h2>인기작</h2>
		<a @click.prevent="$router.push({name: 'MovieList'})" href="#" class="viewall">View all <i class="ion-ios-arrow-right"></i></a>
	</div>
	<div class="row">
		<carousel-3d :disable3d="true" :space="395" :autoplay="true" :autoplay-timeout="5000" :display="20" :controlsVisible="true" :height="480" :clickable="false">
			<slide v-for="(slide, i) in slides" :index="i" :key="i">
				<template slot-scope="{ index, isCurrent, leftIndex, rightIndex }">												
          <div class="movie-item" style="width: 100%;">
            <img :data-index="index" :class="{ current: isCurrent, onLeft: (leftIndex >= 0), onRight: (rightIndex >= 0) }" :src="`https://image.tmdb.org/t/p/original${slide.poster_path}`">
            <div class="hvr-inner">
              <a @click.prevent="$router.push({ name: 'MovieDetail', params: { id: `${slide.id}` }})" href="moviesingle.html"> Read more <i class="ion-android-arrow-dropright"></i> </a>
            </div>
          
            <div class="title-in" style="margin-bottom: 40px;">    
              <h6 style=""><a href="#" style="font-size: 20px;">{{ slide.title }}</a></h6>
              <p style="margin-bottom: 50px;"><i class="ion-android-star"></i><span>{{ slide.rating_average }}</span> /10</p>
            </div>
          </div>
				</template>
			</slide>
		</carousel-3d>
	</div>
	<hr>
	<br>
</div>
		

</template>

<script>
import axios from 'axios'
import { Carousel3d, Slide } from 'vue-carousel-3d';
const api = 'http://127.0.0.1:8000/api/v1/movies/mainmovies/'

export default {
  components: {
		Carousel3d,
    Slide
  },
  name: 'MovieItems',
  props: {
  },
  data () {
    return {
      slides: 20,
    }
  },
  created () {    
    axios({
        method: 'get',
        url: api 
      })
        .then(res => {          
          this.slides = res.data['popular']
        })
    
  },
}
</script>

<style>

</style>